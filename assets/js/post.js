function escapeHtml(s){ return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); } function mdToHtml(md){ const lines = md.split('\n'); let out=''; let inList=false; for(let i=0;i<lines.length;i++){ let l = lines[i]; if(/^#\s+/.test(l)){ out+=`<h1>${escapeHtml(l.replace(/^#\s+/,''))}</h1>`; continue; } if(/^##\s+/.test(l)){ out+=`<h2>${escapeHtml(l.replace(/^##\s+/,''))}</h2>`; continue; } if(/^\*\s+/.test(l)){ if(!inList){ inList=true; out+='<ul>'; } out += '<li>'+escapeHtml(l.replace(/^\*\s+/,''))+'</li>'; if(i+1<lines.length && !/^\*\s+/.test(lines[i+1])){ out+='</ul>'; inList=false; } continue; } if(l.trim()===''){ out += '<p></p>'; continue; } out += '<p>'+escapeHtml(l)+'</p>'; } return out; } document.addEventListener('DOMContentLoaded', async ()=>{ const params = new URLSearchParams(location.search); const slug = params.get('post'); if(!slug){ document.getElementById('post-wrap').innerHTML = '<p>No post specified.</p>'; return; } try{ const r = await fetch('/posts/'+slug+'.md'); if(!r.ok){ document.getElementById('post-wrap').innerHTML = '<p>Post not found.</p>'; return; } const md = await r.text(); const titleMatch = md.match(/^#\s+(.+)$/m); const title = titleMatch ? titleMatch[1] : slug; document.getElementById('post-title').textContent = title; document.title = title + ' â€“ EduAdmit'; document.getElementById('post-content').innerHTML = mdToHtml(md); }catch(e){ document.getElementById('post-wrap').innerHTML = '<p>Could not load post.</p>'; } });